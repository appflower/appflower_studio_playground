<?xml version="1.0" encoding="utf-8"?>
	<i:view xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://www.appflower.com /schema/appflower.xsd" 
	xmlns:i="http://www.appflower.com/schema/" type="edit">
	
	<i:title>User Management</i:title>
	
		<i:datasource type="orm">
			<i:class>sfGuardUserPeer</i:class>
			<i:method name="retrieveByPk">
				<i:param name="id">{id}</i:param>
			</i:method>
		</i:datasource>
		
		<i:fields>
			<i:field name="id" type="hidden">
				<i:value type="orm">
					<i:source name="getId" />
				</i:value>
			</i:field>
			
			<i:field name="is_active" label="Is Active" type="checkbox" state="editable" style="css">
				<i:value type="orm">
					<i:source name="getIsActive" />
				</i:value>
				
				<i:help>Is user active?</i:help>
				<i:comment>The status of the user</i:comment>
			</i:field>
			
			<i:field name="first_name" label="Firstname*" type="input" state="editable" style="css">
				<i:value type="orm">
					<i:source name="getFirstName" />
				</i:value>
				
				<i:help>Please input the first name of user</i:help>
				<i:comment>Firstname of user</i:comment>
				
				<i:validator name="sfStringValidator">
					<i:param name="min">2</i:param>
					<i:param name="max">20</i:param>
				</i:validator>
			</i:field>
			
			<i:field name="last_name" label="Lastname*" type="input" state="editable" style="css">
				<i:value type="orm">
					<i:source name="getLastName" />
				</i:value>
				
				<i:help>Please input the last name of user</i:help>
				<i:comment>Lastname of user</i:comment>
			</i:field>
			
			<i:field name="username" label="Username (your email)*" type="input" state="editable" style="css">
				<i:value type="orm">
					<i:source name="getUsername" />
				</i:value>
				
				<i:help>Please input the desired username</i:help>
				<i:comment>Input desired username</i:comment>
			
				<i:validator name="immValidatorUnique">
				    <i:param name="class">sfGuardUser</i:param>
					<i:param name="column">username</i:param>
					<i:param name="unique_error">User with the username "%value%" already exists. Please choose another one.</i:param>
				</i:validator>
				<i:validator name="sfValidatorEmail">
					<i:param name="invalid_error">Only valid email address is accepted.</i:param>
				</i:validator>
			</i:field>
			
			<i:field name="guard_password" label="Password*" type="password" state="editable" style="css">
				
				<i:help>Please input password</i:help>
				<i:comment>Input password</i:comment>
				
				<i:validator name="sfStringValidator">
					<i:param name="min">5</i:param>
					<i:param name="max">20</i:param>
				</i:validator>
			</i:field>
			
			<i:field name="timezone_id" label="Time Zone" type="combo" state="editable" selected="{zone}" style="css">
				<i:value type="orm">					
					<i:class>TimeZonesPeer</i:class>
					<i:method name="getAll">
					</i:method> 
  				</i:value>
  				<i:help>Please select the timezone</i:help> 
  				<i:comment>Select timezone</i:comment> 
  			</i:field>
  			
  			<i:field name="object_permission_id" label="Object Permission" type="combo" selected="{op}" state="editable" style="css">
				<i:value type="orm">					
					<i:class>ObjectPermissionPeer</i:class>
					<i:method name="getAll">
					</i:method> 
  				</i:value>
  				<i:help>Please select object permission</i:help> 
  				<i:comment>Select object permission</i:comment> 
  			</i:field>
  			
  			<i:field name="associated_sf_guard_group" label="Group Permissions" type="doublemulticombo" state="editable" style="css">
				<i:value type="orm">					
					<i:class>sfGuardUserGroupPeer</i:class>
					<i:method name="getAll">
						<i:param name="uid">{id}</i:param>
					</i:method> 
  				</i:value>
  				<i:help>Please select a user group</i:help> 
  				<i:comment>Select user group</i:comment> 
  			</i:field>  			
		</i:fields>
		
		<i:actions>
		    <i:action name="list" url="sfGuardUser/listUser" />
		</i:actions>
		
		<i:grouping>
		    <i:set title="Login Information">
		    	<i:ref to="id" />
		        <i:ref to="username" />
		        <i:ref to="guard_password" />
		     </i:set>
		     
		     <i:set title="User Profile">
				<i:ref to="first_name" />
				<i:ref to="last_name" />
				<i:ref to="timezone_id" />
			</i:set>
			
			<i:set title="User Permissions">
				<i:ref to="object_permission_id" />
				<i:ref to="associated_sf_guard_group" />
				<i:ref to="is_active" />
			</i:set>
		 </i:grouping>
	</i:view>